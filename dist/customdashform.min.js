!function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=304)}({304:function(e,t,r){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}n(r(86)),n(r(87))},86:function(e,t,r){"use strict";function n(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){function n(i,o){try{var s=t[i](o),a=s.value}catch(e){return void r(e)}if(!s.done)return Promise.resolve(a).then(function(e){n("next",e)},function(e){n("throw",e)});e(a)}return n("next")})}}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){var r=[],n=!0,i=!1,o=void 0;try{for(var s,a=e[Symbol.iterator]();!(n=(s=a.next()).done)&&(r.push(s.value),!t||r.length!==t);n=!0);}catch(e){i=!0,o=e}finally{try{!n&&a.return&&a.return()}finally{if(i)throw o}}return r}return function(t,r){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,r);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),l=function(e){function t(){return i(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return s(t,HTMLElement),u(t,[{key:"connectedCallback",value:function(){var e=this;this._hasErrors=[],this._customControls=new Map,this._isInitialized||window.requestAnimationFrame(function(){return e._init()})}},{key:"_init",value:function(){var e=this;this._form=this.querySelector("form"),this._form?(this._isInitialized=!0,this._form.setAttribute("novalidate",""),this.addEventListener("blur",this._blurHandler,!0),this.addEventListener("submit",this._submitHandler,!1),this.addEventListener("customdashform:registercontrol",this._onregisterCustomControl.bind(this),!1)):window.requestAnimationFrame(function(){return e._init()})}},{key:"_destroy",value:function(){this.disconnectedCallback()}},{key:"disconnectedCallback",value:function(){this.removeEventListener("blur",this._blurHandler,!0),this.addEventListener("submit",this._submitHandler,!1)}},{key:"_onregisterCustomControl",value:function(e){this._customControls.set(e.target._field,e.target),e.target._setCustomForm(this),e.stopPropagation()}},{key:"_determineMessage",value:function(e,t){function r(e,t){return t in e?e[t]:e._field?e._field[t]:void 0}var n=r(e,"minLength"),i=r(e,"maxLength"),o=r(e,"value").length,s={valueMissing:"Please fill out this field.",typeMismatchEmail:"Please enter an email address.",typeMismatchUrl:"Please enter a URL.",tooShort:"Please lengthen this text to "+n+" characters or more. You are currently using "+o+" characters.",tooLong:"Please shorten this text to no more than "+i+" characters. You are currently using "+o+" characters.",patternMismatch:"Please match the requested format.",badInput:"Please enter a number.",stepMismatch:"Please select a valid value.",rangeOverflow:"Please select a value that is no more than "+r(e,"max")+".",rangeUnderflow:"Please select a value that is no less than "+r(e,"min")+".",generic:"The value you entered for this field is invalid."};if("function"==typeof e._getCustomMessage){var a=e._getCustomMessage(t);if(a)return a}return"typeMismatch"===t?s[""+t+e.type[0].toUpperCase()+e.type.slice(1)]:"patternMismatch"===t&&e.hasAttribute("title")?e.getAttribute("title"):e.validationMessage||s[t]}},{key:"_onSubmit",value:function(e,t){}},{key:"_getFieldLabel",value:function(e){return this.querySelector('label[for="'+e.id+'"]')||e.closest("label")}},{key:"_createErrorMessage",value:function(e,t){var r=e.id||e.name;if(r){var n=this.querySelector("#error-for-"+r);if(!n){(n=document.createElement("div")).className=this._errorClass,n.id="error-for-"+r;var i=this._getFieldLabel(e);!i||"radio"!==e.type&&"checkbox"!==e.type?e.parentElement.insertBefore(n,e.nextElementSibling):i.parentElement.insertBefore(n,i.nextElementSibling),i&&i.classList.add(this._labelErrorClass)}return e.setAttribute("aria-describedby","error-for-"+r),n.innerHTML=t,n}}},{key:"_revealErrorMessage",value:function(e){e.style.display="block",e.style.visibility="visible"}},{key:"_showError",value:function(e,t){var r=this;if("function"!=typeof e._showError){e.classList.add(this._fieldErrorClass),"radio"===e.type&&e.name&&document.getElementsByName(e.name).forEach(function(e){e.form===r._form&&e.classList.add(r._fieldErrorClass)});var n=this._createErrorMessage(e,t);n&&this._revealErrorMessage(n)}else e._showError(t)}},{key:"_removeError",value:function(e){var t=this;if("function"!=typeof e._removeError){e.removeAttribute("aria-describedby"),e.classList.remove(this._fieldErrorClass);var r=this._getFieldLabel(e);r&&r.classList.remove(this._labelErrorClass),"radio"===e.type&&e.name&&Array.from(document.getElementsByName(e.name)).forEach(function(e){e.form===t._form&&e.classList.remove(t._fieldErrorClass)});var n=e.id||e.name;if(n){var i=this.querySelector("."+this._errorClass+"#error-for-"+n);i&&(i.innerHTML="",i.style.display="none",i.style.visibility="hidden")}}else e._removeError(e)}},{key:"_shouldNotValidate",value:function(e){if(e.disabled||e._disabled||e.closest("fieldset[disabled]")||this._ignoredTypes.indexOf(e.type)>-1)return!0}},{key:"_submittedWithFormnovalidate",value:function(){var e=this._submissionButton;return!(!e||!e.hasAttribute("formnovalidate"))}},{key:"_getValidity",value:function(e){return"_validity"in e?e._validity:new Promise(function(t){return t(e.validity)})}},{key:"_hasError",value:function(e){var t=this;return e.dataset.pendingvalidation=!0,new Promise(function(r,n){if(t._shouldNotValidate(e))return e.dataset.pendingvalidation=!1,r(!1);t._getValidity(e).then(function(n){if(e.dataset.pendingvalidation=!1,n.valid)return r(!1);var i=t._validityTypes;e._validityTypes&&e._validityTypes.length>0&&(i=e._validityTypes);var o=!0,s=!1,a=void 0;try{for(var u,l=i[Symbol.iterator]();!(o=(u=l.next()).done);o=!0){var c=u.value;if(!0===n[c])return r([e,t._determineMessage(e,c)])}}catch(e){s=!0,a=e}finally{try{!o&&l.return&&l.return()}finally{if(s)throw a}}return r([e,t._determineMessage(e,"generic")])})})}},{key:"_blurHandler",value:function(e){var t=this,r=e.target;this._customControls.has(r)&&(r=this._customControls.get(r));this._hasError(r).then(function(e){if(e){var n=a(e,2),i=n[0],o=n[1];t._showError(i,o)}else t._removeError(r)})}},{key:"_validateAll",value:function(){var e=n(regeneratorRuntime.mark(function e(){var t,r=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=this._fields.map(function(){var e=n(regeneratorRuntime.mark(function e(t){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r._hasError(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}},e,r)}));return function(t){return e.apply(this,arguments)}}()),e.next=3,Promise.all(t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"_submitHandler",value:function(e){var t=this;if(!this._submittedWithFormnovalidate()){e.preventDefault();var r=[];this._validateAll().then(function(e){e.forEach(function(e){if(e){var n=a(e,2),i=n[0],o=n[1];t._showError(i,o),r.push(i)}});if(r.length>0){var n="focus"in r[0]?"focus":"_focus";r[0][n]()}else{if(t._disableSubmit)return t._onSubmit(form,t._fields);t._form.submit(),t._onSubmit(t._form,t._fields)}}).catch(function(e){console.log(e)})}}},{key:"_fields",get:function(){var e=this;return Array.from(this._form.elements).map(function(t){return e._customControls.has(t)?e._customControls.get(t):t})}},{key:"_disableSubmit",get:function(){return!1}},{key:"_validityTypes",get:function(){return["valueMissing","typeMismatch","tooShort","tooLong","patternMismatch","badInput","stepMismatch","rangeOverflow","rangeUnderflow"]}},{key:"_ignoredTypes",get:function(){return["field","submit","button","reset"]}},{key:"_errorClass",get:function(){return"error-message"}},{key:"_fieldErrorClass",get:function(){return"error"}},{key:"_labelErrorClass",get:function(){return this._fieldErrorClass+"-label"}},{key:"_submissionButton",get:function(){var e=document.activeElement;return e&&e.form===this._form?e:null}}]),t}();t.default=l},87:function(e,t,r){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function o(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),a=function(e){function t(){return n(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return o(t,HTMLElement),s(t,[{key:"connectedCallback",value:function(){var e=this;this._isInitialized||window.requestAnimationFrame(function(){return e._init()})}},{key:"_init",value:function(){var e=this;this._field?(this._registerAsCustomControl(),this._isInitialized=!0):window.requestAnimationFrame(function(){return e._init()})}},{key:"_getCustomMessage",value:function(e){var t=e.toLowerCase();return this.hasAttribute(t)?this.getAttribute(t):""}},{key:"_showError",value:function(e){this._customForm&&this._customForm._showError(this._field,e)}},{key:"_removeError",value:function(e){this._customForm&&this._customForm._removeError(this._field,e)}},{key:"_focus",value:function(){this._field.focus()}},{key:"_registerAsCustomControl",value:function(){var e=new CustomEvent("customdashform:registercontrol",{bubbles:!0});this.dispatchEvent(e)}},{key:"_setCustomForm",value:function(e){this._customForm=e}},{key:"_isAsync",get:function(){return this.hasAttribute("async")}},{key:"_validity",get:function(){return Promise.resolve(this._field.validity)}},{key:"_disabled",get:function(){return this._field.disabled},set:function(e){this._field.disabled=!!e}},{key:"_field",get:function(){return this.querySelector("input, select, textarea")||null}},{key:"_form",get:function(){return this._field.form}},{key:"_validityTypes",get:function(){return[]}}]),t}();t.default=a}});